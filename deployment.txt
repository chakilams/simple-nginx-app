apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx
  namespace: owndemo
  annotations:
    fluxcd.io/tag.demoapp: glob:v*
    fluxcd.io/automated: 'true'
spec:
  replicas: 1
  strategy:
      type: RollingUpdate
      rollingUpdate:
        maxSurge: 1
        maxUnavailable: 1
  selector:
      matchLabels:
        app: nginx
  template:
      metadata:
        labels:
          app: nginx
      spec:
        containers:
          - name: demoapp
            image: docker.io/chakilams3/simple-nginx:v18
            ports:
            - name: http
              containerPort: 5000
          - name: nginx
            image: nginx:1.18.0
            ports:
            - name: http
              containerPort: 80
